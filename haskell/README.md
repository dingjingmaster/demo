# Haskell

Haskell是一种惰性的函数式编程语言，由一个学术委员会在20世纪80年代末创建。

```
     +-------------------+
     |    INPUT x = 3    |
     +-------------------+
                |
                |
               \|/
            +------------------------+
            |                        |
            |  FUNCTION f = x^2      |
            |                        |
            +------------------------+
                         | output
                         |
                        \|/ input
                     +---------------------------+ 
                     |                           |
                     |  FUNCTION f = f(x)        |
                     |                           |
                     +---------------------------+
                                  |
                                  |
                                 \|/ OUTPUT ...
```

Haskell是一种函数式语言，这意味着：
- 函数是一等公民，函数是可以与任何其它类型的值以完全相同的方式使用。
- Haskell程序的意义集中在计算表达式，而不是执行指令。

Haskell 表达式始终是引用透明的：
- 一切数据、结构都是不可变的
- 表达式对全局变量不会由任何修改
- 每次用相同的参数调用相同的函数，都会得到相同的输出

这听起来不可思议，是怎么做到在一切不可变的这种情况下完成事情的？这需要思维上的转变，一旦作出改变则会有很多好处。
- 等式推理和重构：在Haskell中，你总是可以“用等号替换等号”，就像你在代数课上学到的那样。
- 并发：当表达式保证不会互相影响时候，并行求值很容易
- 较少的麻烦：简单、易维护、易调试

**惰性**，在Haskell中，表达式直到实际需要它们的结果时才计算。这是一个影响深远的简单决定，这将产生如下影响:
- 只要定义一个函数，就可以很容易地定义一个新的控制结构。
- 可以定义和使用无限的数据结构。
- 它支持更组合的编程风格(参见下面的整体编程)。
- 然而，一个主要的缺点是，对时间和空间使用的推理变得更加复杂!

**静态类型**，每个Haskell表达式都有一个类型，类型都是在编译时检查的。有类型错误的程序甚至无法编译，更不用说运行了。

Haskell 文档扩展名`.lhs`、源码名`.hs`

## Haskell 三个关键概念

- 类型
- 抽象
- 全麦编程（wholemeal programming）

### 类型

静态类型系统看起来很烦人。事实上，在像c++和Java这样的语言中，它们很烦人。但这并不是因为静态类型系统本身令人讨厌;这是因为c++和Java的类型系统表达能力不够！接下来我们将仔细研究Haskell的类型系统
- 类型有助于理清思路，表达程序结构：编写Haskell程序的第一步通常是写下所有类型。因为Haskell的类型系统非常具有表现力，所以这是一个非常重要的设计步骤，对于理清程序的思路有很大的帮助。
- 类型作为文档一部分：给定一个有表现力的类型系统，仅仅看一下函数的类型就能告诉你很多关于函数可能做什么以及如何使用它的信息。
- 将运行时错误转换为编译时错误：能够提前修复错误要比仅仅进行大量测试并期待最好的结果要好得多。“如果它可以编译，那么它一定是正确的”是很滑稽的(即使在类型正确的程序中仍然很有可能出现逻辑错误)。

### 抽象

“不要重复自己”是编程界经常听到的口头禅。也被称为“抽象原则”，其思想是没有任何东西应该被复制:每个想法、算法和数据块应该在代码中只出现一次。采用相似的代码片段并分解出它们的共性被称为抽象过程。

Haskell非常擅长抽象：参数多态性、高阶函数和类型类等特性都有助于避免重复。接下来的Haskell之旅很大程度上是一个从具体到抽象的旅程。

### 全麦编程

我们将探讨的另一个主题是全麦计划。引用Ralf Hinze的话:

“函数式语言擅长整体编程，这是杰兰特·琼斯创造的一个术语。“整体规划”的意思是要考虑大局：处理整个列表，而不是元素序列;开发一个解决方案空间，而不是一个单独的解决方案；想象一个图，而不是一条路径。全麦编程通常会为特定问题提供新的见解或新的视角。首先解决一个更普遍的问题，然后通过将一般程序转换为更专门的程序来解决特定问题。”

例如，考虑以下C/ java类语言中的伪代码:
```
int acc = 0;
for ( int i = 0; i < lst.length; i++ ) {
  acc = acc + 3 * lst[i];
}
```
在Haskell，我们仅仅需要这样写：
```
sum (map (3*) lst)
```
[Haskell变量和类型](docs/001.md)
